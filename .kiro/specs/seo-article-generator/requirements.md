# Requirements Document

## Introduction

SEO記事生成・管理システムは、ユーザーが入力したサイトのURLやイメージを基に、AI（GPT-4、Claude 4 Sonnet、Gemini 2.0 Flash）を活用してSEO最適化されたコラム記事を大量生成・管理するWebサービスです。多言語対応（13言語）、会員制、トークン使用量管理機能を備え、エックスサーバー環境（PHP、MySQL、JavaScript、HTML、CSS）での動作を想定しています。

## Requirements

### Requirement 1

**User Story:** ユーザーとして、複数のサイトを管理し、それぞれに対してSEO最適化された記事を生成したい

#### Acceptance Criteria

1. WHEN ユーザーがサイト情報（URLまたはサイトイメージ）を入力 THEN システムはサイトデータを保存し管理できる状態にする
2. WHEN ユーザーがサイトを選択 THEN システムはそのサイト専用のデータ（記事方針、記事概要、記事本文）を表示する
3. WHEN ユーザーがプルダウンでサイトを切り替え THEN システムは選択されたサイトの分析結果と生成記事を表示する

### Requirement 2

**User Story:** ユーザーとして、使用するAIモデルを選択し、全ての処理に適用したい

#### Acceptance Criteria

1. WHEN ユーザーがAIモデル選択画面にアクセス THEN システムはGPT-4、Claude 4 Sonnet、Gemini 2.0 Flashの選択肢を表示する
2. WHEN ユーザーがAIモデルを選択 THEN システムは選択されたモデルを全てのAI処理に適用する
3. IF ユーザーがAIモデルを変更 THEN システムは以降の全ての処理で新しいモデルを使用する

### Requirement 3

**User Story:** ユーザーとして、サイトURLを入力して関連URLを自動取得し、サイト構造を把握したい

#### Acceptance Criteria

1. WHEN ユーザーがサイトURLを入力 THEN システムはURLを保存する
2. WHEN ユーザーが「関連URL取得」ボタンを押下 THEN システムは入力URLの同階層以下の全URLをリストアップする
3. WHEN システムがURL取得を完了 THEN ユーザーはURLリストを確認し、削除・追加が可能である
4. IF 取得したURLが上層のURL THEN システムは取得対象から除外する

### Requirement 4

**User Story:** ユーザーとして、サイトのURLやイメージを基にSEO記事作成方針を生成したい

#### Acceptance Criteria

1. WHEN ユーザーが「記事作成方針」ボタンを押下 THEN システムはURLまたはサイトイメージを分析してSEO記事作成方針を生成する
2. WHEN 記事作成方針が生成完了 THEN ユーザーは方針内容を確認し編集可能である
3. IF サイトイメージが入力されている THEN システムはコンテンツ特徴を分析してターゲットユーザーとSEOポイントを特定する

### Requirement 5

**User Story:** ユーザーとして、記事作成方針を基に記事概要を10件ずつ生成したい

#### Acceptance Criteria

1. WHEN ユーザーが「記事概要作成」ボタンを押下 THEN システムは記事タイトル、概要、SEOキーワードを10案生成する
2. WHEN ユーザーが再度「記事概要作成」ボタンを押下 THEN システムは既存案と重複しない新しい10案を追加生成する
3. WHEN 記事概要が生成完了 THEN ユーザーは各概要に対して100点満点で評価を付与できる
4. IF ユーザーが評価を入力 THEN システムは次回の記事概要提案時にその評価を反映する

### Requirement 6

**User Story:** ユーザーとして、選択した記事概要から多言語対応の記事本文を生成したい

#### Acceptance Criteria

1. WHEN ユーザーが記事概要をチェックボックスで選択 THEN システムは選択された概要を記録する
2. WHEN ユーザーが「記事作成」ボタンを押下 THEN システムは対応言語選択画面を表示する
3. WHEN ユーザーが言語を選択して実行 THEN システムは2万文字以上のMarkdown形式記事を生成する
4. WHEN 記事生成が完了 THEN システムはAIからのメッセージや文字数情報を本文から除外して保存する
5. IF ユーザーが自由入力の指示を追加 THEN システムはその指示を記事生成に反映する

### Requirement 7

**User Story:** ユーザーとして、13言語に対応した多言語記事を管理したい

#### Acceptance Criteria

1. WHEN システムが多言語対応状況を表示 THEN 日本語（日）、英語（英）、中国語簡体（簡）、中国語繁体（繁）、韓国（韓）、スペイン（西）、アラビア（阿）、ポルトガル（葡）、フランス（仏）、ドイツ（独）、ロシア（露）、イタリア（伊）、インド（印）のアイコンを表示する
2. WHEN 言語が生成済み THEN システムはアイコンを青色で表示する
3. WHEN 言語が未作成 THEN システムはアイコンをグレーで表示する
4. WHEN ユーザーが未作成アイコンを押下 THEN システムはその言語の記事を生成する

### Requirement 8

**User Story:** ユーザーとして、記事一覧から必要な記事をCSV形式で出力したい

#### Acceptance Criteria

1. WHEN ユーザーが記事一覧でチェックボックスを選択 THEN システムは選択された記事を記録する
2. WHEN ユーザーがCSV出力ボタンを押下 THEN システムは選択された記事をCSV形式でダウンロード提供する
3. WHEN CSV出力が実行される THEN ファイルにはタイトル、本文、SEOキーワード、言語情報が含まれる

### Requirement 9

**User Story:** ユーザーとして、会員制システムでセキュアにサービスを利用したい

#### Acceptance Criteria

1. WHEN ユーザーがサービスにアクセス THEN システムはメールアドレスとパスワードによるログイン画面を表示する
2. WHEN ユーザーが正しい認証情報を入力 THEN システムはサービス機能へのアクセスを許可する
3. IF ユーザーが未認証状態 THEN システムは全ての機能へのアクセスを制限する

### Requirement 10

**User Story:** ユーザーとして、AIトークン使用量を管理し、上限に達した場合は利用を制限したい

#### Acceptance Criteria

1. WHEN AIが処理を実行 THEN システムは使用トークン数を累積・月間別に記録する
2. WHEN ユーザーが利用状況を確認 THEN システムは累積トークン合計と月別利用履歴を表示する
3. IF 使用トークン数が管理者設定上限に達した THEN システムは利用を停止する
4. WHEN 月が変わる THEN システムは月間累積をリセットする

### Requirement 11

**User Story:** ユーザーとして、毎日自動で記事概要提案を受け取りたい

#### Acceptance Criteria

1. WHEN 毎日の自動処理が実行される THEN システムは各サイトに対して3案の記事概要を自動生成する
2. WHEN 記事概要が自動生成完了 THEN システムはユーザーのメールアドレスに「今日の提案」として送信する
3. IF ユーザーが複数サイトを管理 THEN システムは各サイト分の提案を含めてメール送信する

### Requirement 12

**User Story:** ユーザーとして、一括処理機能で効率的に記事を生成したい

#### Acceptance Criteria

1. WHEN ユーザーが複数の記事概要をチェック選択 THEN システムは一括生成対象として記録する
2. WHEN ユーザーが一括生成を実行 THEN システムは作成言語選択画面を表示する
3. WHEN ユーザーが全自動作成モードを選択 THEN システムは作成件数と対応言語指定画面を表示する
4. WHEN 一括処理が実行される THEN システムは進捗表示を提供し、タイムアウト対策を実装する

### Requirement 13

**User Story:** ユーザーとして、生成されたコンテンツを編集・再生成したい

#### Acceptance Criteria

1. WHEN ユーザーが記事方針編集を選択 THEN システムは編集可能な画面を表示する
2. WHEN ユーザーが記事概要編集を選択 THEN システムは編集可能な画面を表示する
3. WHEN ユーザーが記事本文編集を選択 THEN システムは編集可能な画面を表示する
4. WHEN ユーザーがAIによる作り直しを選択 THEN システムは該当コンテンツを再生成する
5. WHEN ユーザーが記事に対して評価を入力 THEN システムは評価点数を記録し、今後の生成品質向上に活用する